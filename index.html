<!DOCTYPE html>
<html>
<head>
  <title>QCL Demo</title>
  <meta charset="UTF-8">
  <style>
    body { font-family: sans-serif; padding: 20px; }
    button { padding: 6px 12px; margin-top: 8px; }
  </style>
</head>
<body>
  <h1>Loading QCL App...</h1>
  <div id="qcl-app"></div>

  <script type="module">
    try {
      console.log("ğŸ” Script running...");

      const parserModule = await import('./qcl-parser.js');
      const rendererModule = await import('./qcl-renderer.js');

      const qclSource = await (await fetch('./pages/index.qcl')).text();
      console.log("ğŸ“„ QCL Source:", qclSource);

      const ast = parserModule.parseQCL(qclSource);
      console.log("ğŸŒ³ Parsed AST:", ast);

      const output = rendererModule.renderHTML(ast);
      console.log("ğŸ§± Rendered HTML:", output);

      const temp = document.createElement('div');
      temp.innerHTML = output;

      const target = document.getElementById('qcl-app');
      target.replaceWith(...temp.childNodes);
    } catch (err) {
      console.error("âŒ QCL App Error:", err);
      document.body.innerHTML = `<pre style="color:red;">${err.message}</pre>`;
    }
  </script>
</body>
</html>
